name: Deploy to production
run-name: Deploy to production

on:
  workflow_dispatch:
  push:
    branches: [main]

jobs:
  deploy:
    steps:
      - uses: andstor/file-existence-action@v2
        id: check_files
        with:
          files: "trellis/deploy.yml"
      - uses: ./.github/workflows/trellis-cli.yml
        if: steps.check_files.outputs.files_exists == 'true'
        secrets: inherit
